<!DOCTYPE html>
<html>
<head>
  <title>Edit Item</title>
  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/item.css">
</head>
<body>
  <%- include("partials/header.ejs") %>
    
  <main>
    <h1>Edit Item: <%= item.item %></h1>
    <form action="/item/<%= item.id %>" method="POST">
      <label>
        Name:
        <input type="text" name="item" value="<%= item.item %>" required>
      </label>
      <br>
      <label>
        Quantity:
        <input type="number" name="qty" value="<%= item.qty %>" min="0" required>
      </label>
      <br>
      <label>
        Price:
        <input type="number" name="price" value="<%= item.price %>" min="0" required>
      </label>
      <br>
      <label>
        Category:
        <select name="category" required>
          <% categories.forEach(cat => { %>
            <option value="<%= cat.id %>" <%= cat.id === item.category_id ? 'selected' : '' %>>
              <%= cat.name %>
            </option>
          <% }) %>
        </select>
      </label>
      <br><br>
      <button type="submit" id="saveBtn">Save Changes</button>
    </form>
    <form action="/item/<%= item.id %>/delete" method="POST">
      <button type="submit" onclick="return confirmDelete()" id="deleteBtn">Delete Item</button>
    </form>
  </main>
</body>

<script>
  function confirmDelete() {
    const input = prompt("Enter password to delete:");

    if (input !== DELETE_SECRET) {
      alert("Incorrect password.");
      return false;
    }

    return confirm("Are you sure you want to delete this item?");
  }

  const DELETE_SECRET = "passw0rd";
</script>

</html>
